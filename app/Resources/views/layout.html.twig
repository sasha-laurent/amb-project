<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        {# force Internet Explorer to use the latest rendering engine available #}
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		
		{# mobile meta (hooray!) #}
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="width=device-width, initial-scale=1"/>

		{# icons & favicons (for more: http://www.jonathantneal.com/blog/understand-the-favicon/)  #}
		<link rel="apple-touch-icon" href="{{ asset('apple-icon-touch.png') }}">
		<link rel="icon" href="{{ asset('favicon.png') }}">
		<!--[if IE]>
			<link rel="shortcut icon" href="{{ asset('favicon.ico') }}">
		<![endif]-->
		
        <title>{% block title %}VMB{% endblock %}</title>
        {% block stylesheets %}
			<!-- Latest compiled and minified CSS -->
			<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,400italic,700' rel='stylesheet' type='text/css'>
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
			<link rel='stylesheet' id='stylesheet-css'  href='{{ asset('css/style.css') }}' type='text/css' media='all' />
			<link rel='stylesheet' id='stylesheet-css'  href='{{ asset('css/flag-icon-css-master/css/flag-icon.min.css') }}' type='text/css' media='all' />
			<link rel="stylesheet" href="https://cdn.plyr.io/1.1.5/plyr.css">
        {% endblock %}
    </head>
    <body itemscope itemtype="http://schema.org/WebPage">
		<header>
			<div class="header row container">
				<div class="header-actions" role="navigation">
					<div class="pull-right">
						{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
							<div class="btn-group">
								<a class="btn btn-default">
									<span class="header-user">{{ app.user.username }}</span> 
								</a>
								<a class="btn btn-default" href="{{ path('fos_user_security_logout') }}">
									<span class="glyphicon glyphicon-off" aria-hidden="true"></span>
								</a>
							</div>
						{% else %}
							<a class="btn btn-success" href="{{ path('fos_user_security_login') }}">Connexion</a>
						{% endif %}
						
						<div class="btn-group">
							<button type="button" class="btn btn-default">FR</button>
							<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
								<span class="caret"></span>
								<span class="sr-only">Toggle Dropdown</span>
							</button>
							<ul class="dropdown-menu" role="menu">
								<li><a href="#"><span class="flag flag-icon flag-icon-gb"></span> English</a></li>
								<li><a href="#"><span class="flag flag-icon flag-icon-es"></span> Español</a></li>
								<li><a href="#"><span class="flag flag-icon flag-icon-jp"></span> 日本語</a></li>
							</ul>
						</div>
					</div>
				</div>
				<h3><a href="{{ path('vmb_homepage') }}"><img src="{{ asset('img/vmb.png') }}" alt="VMB" title="Accueil" /></a></h3>
				<form class="top-search-form" accept-charset="UTF-8" action="/search" method="get">
					<input class="form-control search-input" name="q" placeholder="Recherche" type="text">
				</form>
				<ul class="header-nav left" role="navigation">
					{% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
					<li class="dropdown header-nav-item">
						<a data-toggle="dropdown" class="dropdown-toggle header-nav-link" href="#">Présentations <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="{{ path('vmb_presentation_browse') }}">Parcourir les présentations</a></li>
                            <li><a href="{{ path('vmb_resource_browse') }}">Parcourir les ressources</a></li>
                            {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                            <li><a href="{{ path('presentation_perso') }}">Mes présentations</a></li>
                            {% endif %}
                             {% if is_granted('ROLE_ADMIN') %}
                            <li><a href="{{ path('presentation') }}">Gérer les présentations</a></li>
                            {% endif %}
                        </ul>
					</li>
					<li class="dropdown header-nav-item">
						<a data-toggle="dropdown" class="dropdown-toggle header-nav-link" href="#">Outils <b class="caret"></b></a>
                        <ul class="dropdown-menu">				
                            <li><a href="{{ path('resource') }}">Gestion des ressources</a></li>
                            <li><a href="{{ path('matrix') }}">Gestion des matrices</a></li>
                            {% if is_granted('ROLE_ADMIN') %}
                            <li><a href="#">Traduction</a></li>
                            <li><a href="{{ path('topic') }}">Thématiques</a></li>
                            {% endif %}
                            {% if is_granted('ROLE_TEACHER') %}
                            <li><a href="{{ path('ontology_main') }}">Ontologies</a></li>
                            {% endif %}
                        </ul>
					</li>
					{% endif %}
				</ul>
			</div>
		</header>
      
		<div class="container main_body">
			{% if stripBodyHeader is not defined %}
			<h1 class="page-header">{% block h1_title %}{% endblock %}</h1>			
			{% for label, flashes in app.session.flashbag.all %}
				{% for flash in flashes %}
					<div class="alert alert-{{ label }}{{ alertDismissible|default(false) ? ' alert-dismissible' : '' }}">
						{% if (alertDismissible|default(false)) %}
							<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						{% endif %}
						{{ flash }}
					</div>
				{% endfor %}
			{% endfor %}
			{% endif %}
			{% block body %}{% endblock %}
		</div>
		<footer class="footer">
			<div class="container"><p>&copy; VMB 2015</p></div>
		</footer>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		{% block script %}
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
			<!-- Latest compiled and minified JavaScript -->
			<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
			<script src="//code.jquery.com/ui/1.11.3/jquery-ui.js"></script>			
			<script>
				// Plyr utilities
				(function(d, u){
					var a = new XMLHttpRequest(),
						b = d.body;

					// Check for CORS support
					// If you're loading from same domain, you can remove the if statement
					if("withCredentials" in a) {
						a.open("GET", u, true);
						a.send();
						a.onload = function(){
							var c = d.createElement("div");
							c.style.display="none";
							c.innerHTML = a.responseText;
							b.insertBefore(c, b.childNodes[0]);
						}
					}
				})(document, "https://cdn.plyr.io/1.1.5/sprite.svg");
			</script>
			
			<script src="https://cdn.plyr.io/1.1.5/plyr.js"></script>
        	
        	<script>
				$( ".showAll" ).click(function() {
					if($(this).hasClass('collapsed')) {
						$(this).removeClass('collapsed');
						$(this).html($(this).attr('data-prototype'));
					}
					else {
						$(this).addClass('collapsed');
						$(this).html('...');
					}
				});
			</script>
		{% endblock %}
	</body>
</html>
