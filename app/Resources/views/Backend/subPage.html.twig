{% extends app.request.isXmlHttpRequest ? '::minimum.html.twig' : "::layout.html.twig" %}

{% block title %}
  {{ mainTitle }} - {{ parent() }}
{% endblock %}

{% set nbActions = ((saveButton is defined) ? 1.5 : 0) + ((saveToCaddy is defined) ? 1.5 : 0) + ((forkButtonUrl is defined) ? 1 : 0) + ((addButtonUrl is defined) ? 1 : 0) + ((editButtonUrl is defined) ? 1 : 0) + ((delButtonUrl is defined) ? 1 : 0) %}

{% if nbActions > 3 %}
	{% set colWidth = 3 %}
{% else %}
	{% set colWidth = 2 %}
{% endif %}

{% block h1_title %}
	<div class="row">
		<div class="col-md-{{ 12 - colWidth }}">
			{% if backButtonUrl is defined %}
				<a title="{{"actions.back"|trans|desc('Go Back')}}" class="btn btn-default" href="{{ backButtonUrl }}" >
					<span class="left glyphicon glyphicon-chevron-left" aria-hidden="true" >
					</span>
				</a>
			{% endif %}
			{{ mainTitle }}
		</div>
		<div class="col-md-{{ colWidth }} text-right">
			{% if (saveButton is defined) or (saveToCaddy is defined) %}
				<span class="loading_indicator_inline loading_indicator_{{entity.id}}">
				</span>
			{% endif %}
			<div class="btn-group" role="group" aria-label="...">
				{% if saveToCaddy is defined %}
					<a title="{{ "menu.bookmark"|trans }}" class="btn {% if inCaddy %}btn-info{% else %}btn-default{% endif %} {{ saveToCaddy }}AddToCaddy" data-id="{{ entity.id }}" id="caddy-btn">
						<span class="left glyphicon glyphicon-star" aria-hidden="true"></span>
					</a>				
				{% endif %}
				{% if saveButton is defined %}
					<a class="btn btn-default" id="save-btn" title="{{ "actions.save"|trans|desc('Save') }}">
						<span class="left glyphicon glyphicon-floppy-disk" aria-hidden="true"></span>
					</a>
				{% endif %}
				{% if addButtonUrl is defined %}
					<a title="{{ "actions.add"|trans|desc('Add') }}" class="btn btn-default" {% if addModal is defined %} data-toggle="modal" data-target="{{ addModal }}" {% else %} href="{{ addButtonUrl }}" {% endif %} >
						<span class="left glyphicon glyphicon-plus" aria-hidden="true"></span>
					</a>
				{% endif %}
				{% if editButtonUrl is defined %}
					<a title="{{ "actions.edit"|trans|desc('Edit') }}" class="btn btn-default" {% if editModal is defined %} data-toggle="modal" data-target="{{ editModal }}" {% else %} href="{{ editButtonUrl }}" {% endif %} >
						<span class="left glyphicon glyphicon-pencil" aria-hidden="true"></span>
					</a>
				{% endif %}
				{% if optionButtonModal is defined %}
					<a title="{{ "actions.options"|trans|desc('Options') }}" class="btn btn-default" data-toggle="modal" data-target="{{ optionButtonModal }}">
						<span class="left glyphicon glyphicon-option-vertical" aria-hidden="true"></span>
					</a>
				{% endif %}
				{% if delButtonUrl is defined %}
					<a title="{{ "actions.delete"|trans|desc('Delete') }}" class="btn btn-default" href="{{ delButtonUrl }}" >
						<span class="left glyphicon glyphicon-remove" aria-hidden="true"></span>
					</a>
				{% endif %}
				{% if forkButtonUrl is defined %}
					<a title="{{ "actions.duplicate"|trans|desc('Duplicate') }}" class="btn btn-default" href="{{ forkButtonUrl }}" >
						<span class="left glyphicon glyphicon-duplicate" aria-hidden="true"></span>
					</a>
				{% endif %}
			</div>
		</div>
	</div>	
{% endblock %}


{% block script %}
	{{ parent() }}
	{% if (saveToCaddy is defined) %}
		{% include '::addToCaddy.html.twig' %}
	{% endif %}
{% endblock %}
