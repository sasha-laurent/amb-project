{% set addModal = '#modalAddPresentation' %}
{% set addButtonUrl = 'true' %}
{% extends '::Backend/subPage.html.twig' %}

{% block body %}
    <div class="panel panel-default">
		<div class="panel-heading">
			<div class="row">				
				<div class="col-md-{% if is_granted('ROLE_TEACHER') %}6{% else %}8{% endif %}">Titre</div>			
				<div class="col-md-1 text-center">Durée</div>
				<div class="col-md-1 text-center">Publique</div>
				{% if is_granted('ROLE_TEACHER') %}
				<div class="col-md-1 text-center">Défaut</div>
				<div class="col-md-1 text-center">Officiel</div>
				{% endif %}				
				<div class="col-md-2 text-center">Action</div>
        	</div>
		</div>
	</div>
	
	<ul class="list-group">
        {% for entity in entities %}
			<li class="list-group-item row">
				<div class="col-md-{% if is_granted('ROLE_TEACHER') %}6{% else %}8{% endif %}"><a href="{{ path('presentation_show', { 'id': entity.id }) }}"><span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span> {{ entity.title }}</a></div>
                <div class="col-md-1 text-center">{{ "%02d"|format(entity.duration // 60) }}:{{ "%02d"|format(entity.duration % 60) }}</div>
                <div class="col-md-1 text-center">
					<a type="button" class="btn switch" href="{{ path('presentation_perso', {'id': entity.id, 'public': (entity.public+1)%2}) }}">
						{% if entity.public==1 %}
							<span class="shown-value glyphicon glyphicon-ok"></span>
							<span class="hidden-value glyphicon glyphicon-minus"></span>
						{% else %}
							<span class="shown-value glyphicon glyphicon-minus"></span>
							<span class="hidden-value glyphicon glyphicon-ok"></span>
						{% endif %}
					</a>
				</div>
				{% if is_granted('ROLE_TEACHER') %}
				<div class="col-md-1 text-center">
					{% if entity.default %}
					<a type="button" class="btn switch" href="{{ path('presentation_perso', {'id': entity.id, 'default': (entity.default+1)%2}) }}">
						<span class="shown-value glyphicon glyphicon-ok"></span>
						<span class="hidden-value glyphicon glyphicon-minus"></span>
					</a>
					{% else %}
					<a type="button" class="btn switch" href="{{ path('presentation_perso', {'id': entity.id, 'default': (entity.default+1)%2}) }}">
						<span class="shown-value glyphicon glyphicon-minus"></span>
						<span class="hidden-value glyphicon glyphicon-ok"></span>
					</a>
					{% endif %}
				</div>
				<div class="col-md-1 text-center">
					{% if entity.official %}
						<span class="label label-success">oui</span>
					{% else %}
						<span class="label label-danger">non</span>
					{% endif %}
				</div>
				{% endif %}	
                <div class="col-md-2 text-center">				
					<div class="btn-group" role="group" aria-label="...">
						<a href="{{ path('presentation_edit', {'id' : entity.id}) }}" type="button" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
						<a href="{{ path('presentation_delete', {'id' : entity.id}) }}" type="button" class="btn btn-default"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a>
					</div>
				</div>
            </li>
        {% endfor %}
    </ul>
    
    <div class="text-center">
		<ul class="pagination">
			{% if page == 1 %}
			<li class="disabled">
				<span>
					<span aria-hidden="true">&laquo;</span>
				</span>
			</li>
			{% else %}
			<li>
				<a href="{{ path('presentation', {'page': page-1}) }}" aria-label="Previous">
					<span aria-hidden="true">&laquo;</span>
				</a>
			</li>
			{% endif %}
			{% for p in range(1, nbPages) %}
				<li{% if p == page %} class="active"{% endif %}>
					<a href="{{ path('presentation', {'page': p}) }}">{{ p }}</a>
				</li>
			{% endfor %}
			{% if page == nbPages %}
			<li class="disabled">
				<span>
					<span aria-hidden="true">&raquo;</span>
				</span>
			</li>
			{% else %}
			<li>
				<a href="{{ path('presentation', {'page': page+1}) }}" aria-label="Next">
					<span aria-hidden="true">&raquo;</span>
				</a>
			</li>
			{% endif %}
		</ul>
	</div>
	
<!-- Modal -->
<div class="modal fade" id="modalAddPresentation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title" id="myModalLabel">Ajouter une présentation</h3>
      </div>
      <div class="modal-body">
        <h4>Créer une présentation de zéro</h4>
        <p>
			Créer une présentation s'effectue en 3 étapes :
		</p>
		<ul>
			<li>Choisir dans quelle thématique votre présentation se situe</li>
			<li>Définir une matrice de présentation utilisant les ressources de la thématique en question</li>
			<li>Définir votre présentation à partir de votre matrice (en cliquant sur l'icone <span class="glyphicon glyphicon-blackboard"></span> dans la liste de vos matrices)</li>
		</ul>	
		<p>
			<a href="{{ path('matrix_new') }}"><span class="glyphicon glyphicon-chevron-right"></span> Créer une matrice de présentation</a><br/>
			<a href="{{ path('matrix') }}"><span class="glyphicon glyphicon-chevron-right"></span> Créer une présentation depuis vos matrices</a>
        </p>
        <hr/>
        <h4>Créer une présentation depuis une présentation existante</h4>
        <p>
			Si vous souhaitez créer une présentation sans avoir à définir vous même votre matrice de présentation, il est possible de partir d'une matrice existante.
			Pour se faire, il vous suffit de parcourir les présentations existantes et de vous rendre sur celle de votre choix. Une fois sur la page de la présentation, deux possibilités s'offrent à vous.
		</p>
		<ul>
			<li>Faire une copie de travail de la présentation ET de la matrice associée en cliquant sur <span class="glyphicon glyphicon-duplicate"></span> en haut à droite</li>
			<li>Ou bien vous rendre dans "Voir plus" puis dans "Visualisation avancée" pour créer une présentation en conservant la matrice d'origine (vous ne pourrez donc pas modifier cette dernière ni ajouter de ressources)</li>
		</ul>
		<p>
			<a href="{{ path('vmb_presentation_browse') }}"><span class="glyphicon glyphicon-chevron-right"></span> Parcourir les présentations existantes</a>
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer <span class="glyphicon glyphicon-remove"></span></button>
      </div>
    </div>
  </div>
</div>
    
{% endblock %}
